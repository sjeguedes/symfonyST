<div class="uk-card uk-card-primary uk-box-shadow-small uk-box-shadow-hover-medium st-border-white-small">
    <div class="uk-card-badge uk-label uk-text-center">
        <span class="uk-text-uppercase uk-text-bold">
            <span class="st-color-red">{{ custom.icon matches '/^image/' ? 'Image' : 'Video' }}</span><br>
            <span class="st-color-red">Added on</span>&nbsp;{{ media.image.creationDate|date('d/m/Y') }}
        </span>
    </div>
    <div class="uk-card-body uk-padding-remove st-background-black">
        {# filter media type to output content with necessary html tag #}
        {% if media.mediaType.type == mediaTypesValues['trickThumbnail'] %}
            <!-- Trick image -->
            {# Thumb image #}
            <div class="uk-position-relative uk-background-cover uk-background-blend-darken st-background-image-header" data-src="{{ asset('assets/images/uploads/'~mediaForSlide|e('html_attr')) }}" style="background-position: 50% 50%; width: 100%; height: 150px" uk-img></div>
            {# Modal for image #}
            <div id="modal-media-{{ index }}" class="uk-flex-top" uk-modal>
                <div class="uk-modal-dialog uk-width-auto uk-padding-small uk-margin-auto-vertical">
                    <button class="uk-modal-close-outside" type="button" uk-close></button>
                    <img width="{{ normalImageMediaType.width }}" height="{{ normalImageMediaType.height }}" src="{{ asset('assets/images/uploads/'~mediaToExpand|e('html_attr')) }}" alt="{{ media.image.description|e('html_attr') }}">
                </div>
            </div>
        {% elseif media.mediaType.type == mediaTypesValues['trickYoutube'] %}
            <!-- Trick Youtube video -->
            {# Iframe for video #}
            <iframe width="100%" height="100%" src="{{ mediaForSlide|e('html_attr') }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen uk-responsive></iframe>
            {# Modal for video #}
            <div id="modal-media-{{ index }}" class="uk-flex-top" uk-modal>
                <div class="uk-modal-dialog uk-width-auto uk-padding-small uk-margin-auto-vertical">
                    <button class="uk-modal-close-outside" type="button" uk-close></button>
                    <iframe width="{{ media.mediaType.width }}" height="{{ media.mediaType.height }}" src="{{ mediaToExpand|e('html_attr') }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen uk-responsive></iframe>
                </div>
            </div>
        {% elseif media.mediaType.type == mediaTypesValues['trickVimeo'] %}
            <!-- Trick Vimeo video -->
            {# Iframe for video #}
            <iframe width="100%" height="100%" src="{{ mediaForSlide|e('html_attr') }}?byline=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen uk-responsive></iframe>
            {# Modal for video #}
            <div id="modal-media-{{ index }}" class="uk-flex-top" uk-modal>
                <div class="uk-modal-dialog uk-width-auto uk-padding-small uk-margin-auto-vertical">
                    <button class="uk-modal-close-outside" type="button" uk-close></button>
                    <iframe width="{{ media.mediaType.width }}" height="{{ media.mediaType.height }}" src="{{ mediaToExpand|e('html_attr') }}?byline=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen uk-responsive></iframe>
                </div>
            </div>
        {% elseif media.mediaType.type == mediaTypesValues['trickDailymotion'] %}
            <!-- Trick Dailymotion video -->
            {# Iframe for video #}
            <iframe width="100%" height="100%" src="{{ mediaForSlide|e('html_attr') }}" frameborder="0" allowfullscreen allow="autoplay" uk-responsive></iframe>
            {# Modal for video #}
            <div id="modal-media-{{ index }}" class="uk-flex-top" uk-modal>
                <div class="uk-modal-dialog uk-width-auto uk-padding-small uk-margin-auto-vertical">
                    <button class="uk-modal-close-outside" type="button" uk-close></button>
                    <iframe width="{{ media.mediaType.width }}" height="{{ media.mediaType.height }}" src="{{ mediaToExpand|e('html_attr') }}" frameborder="0" allowfullscreen allow="autoplay" uk-responsive></iframe>
                </div>
            </div>
        {% endif %}
    </div>
    <div class="uk-card-footer uk-padding-small st-background-blue">
        <div class="uk-flex{{ is_granted('IS_AUTHENTICATED_FULLY') ? ' uk-flex-between' : ' uk-flex-right' }}">
            <div class="{{ is_granted('IS_AUTHENTICATED_FULLY') ? 'uk-text-left' : 'uk-text-right' }}">
                <a href="#modal-media-{{ index }}" class="uk-button uk-button-primary uk-button-small uk-border-rounded" title="{{ custom.title|e('html_attr') }}" uk-toggle>
                    <span uk-icon="icon: {{ custom.icon|e('html_attr') }}; ratio: 1" class="uk-icon"></span>&nbsp;<span uk-icon="icon: expand; ratio: 1" class="uk-icon"></span>
                </a>
            </div>
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <div class="uk-text-right">
                    <a href="{#{{ path('update_media', { 'encodedUuid': media.uuid|uuid_encode }) }}#}#" class="uk-button uk-button-primary uk-button-small uk-border-rounded" title="Update">
                        <span uk-icon="pencil"></span>
                    </a>
                    <a href="{#{{ path('delete_media', { 'encodedUuid': media.uuid|uuid_encode }) }}#}#" class="uk-button uk-button-primary uk-button-small uk-border-rounded" title="Delete">
                        <span uk-icon="trash"></span>
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

